<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · FixedPointAcceleration</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">FixedPointAcceleration</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Index</a></li><li><a class="tocitem" href="../1_FixedPoints/">Introduction</a></li><li><a class="tocitem" href="../2_Algorithms/">Algorithms</a></li><li><a class="tocitem" href="../3_UsingAdvice/">Using package</a></li><li><a class="tocitem" href="../4_Applications/">Applications</a></li><li><a class="tocitem" href="../5_TerminationConditions/">Termination Conditions</a></li><li class="is-active"><a class="tocitem" href>API</a></li><li><a class="tocitem" href="../99_refs/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/s-baumann/FixedPointAcceleration.jl/blob/master/docs/src/6_api.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Function-API"><a class="docs-heading-anchor" href="#Function-API">Function API</a><a id="Function-API-1"></a><a class="docs-heading-anchor-permalink" href="#Function-API" title="Permalink"></a></h1><ul></ul><h3 id="Main-fixed-point-seeking-function"><a class="docs-heading-anchor" href="#Main-fixed-point-seeking-function">Main fixed point seeking function</a><a id="Main-fixed-point-seeking-function-1"></a><a class="docs-heading-anchor-permalink" href="#Main-fixed-point-seeking-function" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="FixedPointAcceleration.fixed_point" href="#FixedPointAcceleration.fixed_point"><code>FixedPointAcceleration.fixed_point</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">fixed_point(func::Function, previous_FixedPointResults::FixedPointResults;
                Algorithm::Symbol = :Anderson,  ConvergenceMetric::Function  = supnorm(input::Array, output::Array) = maximum(abs.(output .- input)),
                ConvergenceMetricThreshold::R = 1e-10, MaxIter::Integer = Integer(1000), MaxM::Integer = Integer(10), ExtrapolationPeriod::Integer = Integer(7), Dampening::Real = AbstractFloat(1.0),
                PrintReports::Bool = false, ReportingSigFig::Integer = Integer(10), ReplaceInvalids::Symbol = :NoAction, ConditionNumberThreshold::Real = 1e3, quiet_errors::Bool = false) where R&lt;:Real
fixed_point(func::Function, Inputs::Array{T, 1};
                Algorithm::Symbol = :Anderson,  ConvergenceMetric::Function  = supnorm(input::Array, output::Array) = maximum(abs.(output .- input)),
                ConvergenceMetricThreshold::Real = 1e-10, MaxIter::Integer = Integer(1000), MaxM::Integer = Integer(10), ExtrapolationPeriod::Integer = Integer(7), Dampening::Real = AbstractFloat(1.0),
                PrintReports::Bool = false, ReportingSigFig::Integer = Integer(10), ReplaceInvalids::Symbol = :NoAction, ConditionNumberThreshold::Real = 1e3, quiet_errors::Bool = false) where T&lt;:Real
fixed_point(func::Function, Inputs::Real;
                Algorithm::Symbol = :Anderson,  ConvergenceMetric::Function  = supnorm(input::Array, output::Array) = maximum(abs.(output .- input)),
                ConvergenceMetricThreshold::Real = 1e-10, MaxIter::Integer = Integer(1000), MaxM::Integer = Integer(10), ExtrapolationPeriod::Integer = Integer(7), Dampening::Real = AbstractFloat(1.0),
                PrintReports::Bool = false, ReportingSigFig::Integer = Integer(10), ReplaceInvalids::Symbol = :NoAction, ConditionNumberThreshold::Real = 1e3, quiet_errors::Bool = false)
fixed_point(func::Function, Inputs::Array{T, 2}; Outputs::Array{T,2} = Array{T,2}(undef,size(Inputs)[1],0),
                Algorithm::Symbol = :Anderson,  ConvergenceMetric::Function  = supnorm(input::Array, output::Array) = maximum(abs.(output .- input)),
                ConvergenceMetricThreshold::Real = 1e-10, MaxIter::Integer = Integer(1000), MaxM::Integer = Integer(10), ExtrapolationPeriod::Integer = Integer(7), Dampening::Real = AbstractFloat(1.0),
                PrintReports::Bool = false, ReportingSigFig::Integer = Integer(10), ReplaceInvalids::Symbol = :NoAction, ConditionNumberThreshold::Real = 1e3, quiet_errors::Bool = false, other_outputs::Union{Missing,NamedTuple} = missing) where T&lt;:Real where R&lt;:Real</code></pre><p>A function for finding the fixed point of another function</p><p><strong>Inputs</strong></p><ul><li><code>func</code> - This is the function for which a fixed point is sought. This function must take and return a vector of the same size dimension.</li><li><code>Inputs</code> - This can be either a 1D-vector of values that is an initial guess for a fixed point or it can be an N x A matrix of previous inputs for which corresponding outputs are available. In this case N is the dimensionality of the fixed point vector you are seeking (Hence each column is a matrix that is input to f) and A is the number of previous Inputs/Outputs that are being provided to the fixed point. Where a matrix is input, a corresponding outputs must be provided or the last column of the outputs matrix is taken as a startpoint guess and the rest of the inputs and output matrices are discarded.</li><li><code>Outputs</code> - This is a matrix of the Function values for each column of the input. It must be provided so that column k of the outputs matrix is equal to Function(Column k of inputs matrix).</li><li><code>Algorithm</code> - This is the fixed point Algorithm to be used. It can be :Anderson, :Simple, :Aitken, :Newton, :MPE, :RRE, :VEA or :SEA. See documentation and references to see explanations of these Algorithms.</li><li><code>ConvergenceMetric</code> - This is a function that takes in a vector of inputs and a table of outputs and returns a scalar. This scalar should be low when convergence is close to being achieved. By default this is the maximum residual by absolute value (the sup norm in the space of residuals).</li><li><code>ConvergenceMetricThreshold</code> - This is the threshold for terminating the algorithm. The algorithm will terminate when the scalar that ConvergenceMetric returns is less than ConvergenceMetricThreshold. This can be set to a negative number in which case the algorithm will run until MaxIter is hit or an error occurs (Note that an error is likely in trying to use any Algorithm other than &quot;Simple&quot; when a fixed point is already found).</li><li><code>MaxIter</code> - This is the maximum number of iterates that will be undertaken.</li><li><code>MaxM</code> - This is the maximum number of saved iterates that are used in the Anderson algorithm. It has no effect if another Algorithm is chosen. Note that the number of previous iterates that will actually be used is the minimum of MaxIter, the dimensionality of the f&#39;s vector and the number of inputs that have been tried to  previously (the width of the Outputs matrix at each given stage of the algorithm). If PrintReports = TRUE, the number of previous iterates actually used is reported as the algorithm is running.</li><li><code>ExtrapolationPeriod</code> - This is the number of simple iterates to perform before extrapolating. This is used for the MPE, RRE, VEA and SEA Algorithms and has no effect if another Algorithm is chosen Where an epsilon algorithm is used this should be a multiple of 2, ie (4,6,8,etc).</li><li><code>Dampening</code> - This is the dampening parameter. By default it is 1 which means no dampening takes place. It can also be less than 1 (indicating dampening) or more than 1 (indicating extrapolation).</li><li><code>PrintReports</code> - This is a boolean describing whether to print ongoing ConvergenceMetric values for each iterate.</li><li><code>ReportingSigFig</code> - This is the number of significant figures that will be used in printing the convergence values to the console (only if PrintReports is TRUE).</li><li><code>ReplaceInvalids</code> - Sometimes an acceleration algorithm proposed a vector with an invalid coordinate (NaN, Inf or missing). This parameter can be set to :ReplaceInvalids (to replace invalid coordinates by the simple iterate values), :ReplaceVector (to replace entire vector with a simple iterate) or :NoAction (where an imminent error will occur).</li><li><code>ConditionNumberThreshold</code> - This is a threshold for what condition number is acceptable for solving the least squares problem for the Anderson Algorithm. If the condition number is larger than this threshold then fewer previous iterates will be used in solving the problem. This has no effect unless the :Anderson Algorithm is used.</li><li><code>quiet_errors</code> - If true the function will return everything already calculated as soon as an error occurs. The callstack that lead to the error is not returned however. If false an error will be thrown with a callstack.</li><li><code>other_outputs</code> - This allows you to pass in side products (as in Other<em>Output</em> in a FixedPointResults struct). It is only used if the FixedPointResults that is input has already found a fixedpoint.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>FixedPointResults</code> struct containing the fixed_point, the Inputs and corresponding Outputs, and convergence values (which are computed under the &quot;ConvergenceMetric&quot;). The list will also include a &quot;Finish&quot; statement describing why it has finished. This is often going to be due to either MaxIter or ConvergenceMetricThreshold being reached. It may also terminate due to an error in generating a new input guess or using the function with that guess. If this occurs the function will terminate early and the &quot;Finish&quot; statement will describe the issue. In this event there will also be additional objects returned in the list &quot;NewInputVector&quot; and possibly &quot;NewOutputVector&quot; that are useful in debugging the issue.</li></ul><p><strong>Examples</strong></p><pre><code class="nohighlight hljs"># For the simplest possible example we can seek the fixed point of the cos function with a scalar.
Inputs = 0.3
Func(x) = cos(x)
A = fixed_point(Func, Inputs; Algorithm = :Aitken, Dampening = 0.5)
B = fixed_point(Func, Inputs; Algorithm = :Anderson, Dampening = 1.0)

# For this next one the ConvergenceMetricThreshold is negative so the algorithm
# will keep running until MaxIter is met.
C = fixed_point(Func, Inputs; Algorithm = :Simple, MaxIter = 4, ConvergenceMetricThreshold = -1.0)
# But we can continue solving for this fixed point but now switching to the Newton Algorithm.
D = fixed_point(Func, C[:Inputs], C[:Outputs]; Algorithm = :Newton)

# We can also find a 4 dimensional fixed point vector of this function.
Inputs = [0.3, 98, 0, pi]
E = fixed_point(Func, Inputs; Algorithm = :Anderson)
F = fixed_point(Func, Inputs; Algorithm = :Anderson, MaxM = 4, ReportingSigFig = 13)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/FixedPointAcceleration.jl/blob/f550a974c3dfb15c1901784ca58f1bf8efb737e2/src/1_MainFunctions.jl#L72-L131">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FixedPointAcceleration.fixed_point_new_input" href="#FixedPointAcceleration.fixed_point_new_input"><code>FixedPointAcceleration.fixed_point_new_input</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">fixed_point_new_input(Inputs::AbstractArray{T,2}, Outputs::AbstractArray{T,2}, Algorithm::Symbol = :Anderson;
                           MaxM::Integer = 10, SimpleStartIndex::Integer = 1, ExtrapolationPeriod::Integer = 1, Dampening::S = AbstractFloat(1),
                           ConditionNumberThreshold::R = AbstractFloat(1000), PrintReports::Bool = false, ReplaceInvalids::InvalidReplacement = :NoAction) where R&lt;:Real where S&lt;:Real where T&lt;:Real</code></pre><p>This function takes the previous inputs and outputs from the fixed_point function and determines what vector to try next in seeking a fixed point.</p><p><strong>Inputs</strong></p><ul><li><code>Inputs</code> - This is an N x A matrix of previous inputs for which corresponding outputs are available. In this case N is the dimensionality of the fixed point vector that is being sought (Hence each column is a matrix that is input to the &quot;Function&quot;) and A is the number of previous Inputs/Outputs that are being provided to the fixed point.</li><li><code>Outputs</code> - This is a matrix of Function values for the each column of the <code>Inputs</code> matrix.</li><li><code>Algorithm</code> - This is the fixed point Algorithm to be used. It can be &quot;Anderson&quot;, &quot;Simple&quot;, &quot;Aitken&quot;, &quot;Newton&quot;, &quot;MPE&quot;, &quot;RRE&quot;, &quot;VEA&quot;, &quot;SEA&quot;.</li><li><code>MaxM</code> - This is the number of saved iterates that are used in the Anderson algorithm. This has no role if another Algorithm is used.</li><li><code>SimpleStartIndex</code> - This is the index for what column in the input/output matrices did the algorithm start doing simple iterates without jumps. This is used for all Algorithms except the simple and Anderson Algorithms where it has no effect.</li><li><code>ExtrapolationPeriod</code> - This is the number of simple iterates to perform before extrapolating. This is used for the MPE, RRE, VEA and SEA Algorithms and has no effect if another Algorithm is chosen.</li><li><code>Dampening</code> - This is the dampening parameter. By default it is 1 which means no dampening takes place. It can also be less than 1 (indicating dampening) or more than 1 (indicating extrapolation).</li><li><code>ConditionNumberThreshold</code> - This is what threshold should be chosen to drop previous iterates if the matrix is ill conditioned. Only used in Anderson acceleration.</li><li><code>PrintReports</code> - This is a boolean describing whether to print ongoing ConvergenceMetric values for each iterate.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>Vector</code> of the next guess for the fixed point.</li></ul><p><strong>Examples</strong></p><pre><code class="nohighlight hljs">FPFunction = function(x){c(0.5*sqrt(abs(x[1] + x[2])), 1.5*x[1] + 0.5*x[2])}
A = fixed_point( Function = FPFunction, Inputs = [0.3,900], MaxIter = 6, Algorithm = :Simple)
NewGuessAnderson = fixed_point_new_input(A[:Inputs], A[:Outputs], Algorithm = :Anderson)
NewGuessVEA = fixed_point_new_input(A[:Inputs], A[:Outputs], Algorithm = :VEA)
NewGuessMPE = fixed_point_new_input(A[:Inputs], A[:Outputs], Algorithm = :MPE)
NewGuessAitken = fixed_point_new_input(A[:Inputs], A[:Outputs], Algorithm = :Aitken)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/FixedPointAcceleration.jl/blob/f550a974c3dfb15c1901784ca58f1bf8efb737e2/src/1_MainFunctions.jl#L250-L275">source</a></section></article><h3 id="Structs"><a class="docs-heading-anchor" href="#Structs">Structs</a><a id="Structs-1"></a><a class="docs-heading-anchor-permalink" href="#Structs" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="FixedPointAcceleration.FunctionEvaluationResult" href="#FixedPointAcceleration.FunctionEvaluationResult"><code>FixedPointAcceleration.FunctionEvaluationResult</code></a> — <span class="docstring-category">Type</span></header><section><div><p>This contains the results from a function evaluation in the FixedPointAcceleration framework.  It containing the following fields:</p><ul><li><code>Input_</code> - The input</li><li><code>Output_</code> - The output of the  function. May be <code>missing</code> if function could not complete without error.</li><li><code>Error_</code> - A symbol representing what error occured.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/FixedPointAcceleration.jl/blob/f550a974c3dfb15c1901784ca58f1bf8efb737e2/src/0_Structs_And_Enums.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FixedPointAcceleration.FixedPointResults" href="#FixedPointAcceleration.FixedPointResults"><code>FixedPointAcceleration.FixedPointResults</code></a> — <span class="docstring-category">Type</span></header><section><div><p>This contains the results from a the fixed_point function.</p><p>It containing the following fields:</p><ul><li><code>FixedPoint_</code> - The <code>Vector</code> with the fixed point that has been found.</li><li><code>Other_Output_</code> - The other output of the fixedpoint function.</li><li><code>Convergence_</code> - A real number showing how close the <code>FixedPoint_</code> is to the input (to the function) that created it as output.</li><li>`TerminationCondition_&#39; - Why did the fixedpoint acceleration stop.</li><li>`Iterations_&#39; - How many iterations were undertaken</li><li><code>ConvergenceVector_</code> - What is the convergence value at each iteration.</li><li><code>FailedEvaluation_</code> - Why did the fixedpoint iteration fail (missing if it did not fail)</li><li><code>Inputs_</code> - What were all of the inputs tried</li><li><code>Outputs_</code> - What were all the corresponding outputs.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/FixedPointAcceleration.jl/blob/f550a974c3dfb15c1901784ca58f1bf8efb737e2/src/0_Structs_And_Enums.jl#L27-L40">source</a></section></article><h3 id="Internal-Functions"><a class="docs-heading-anchor" href="#Internal-Functions">Internal Functions</a><a id="Internal-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Internal-Functions" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="FixedPointAcceleration.put_together_without_jumps" href="#FixedPointAcceleration.put_together_without_jumps"><code>FixedPointAcceleration.put_together_without_jumps</code></a> — <span class="docstring-category">Function</span></header><section><div><p>This function takes the previous inputs and outputs and assembles a matrix with both excluding jumps.</p><p><strong>Inputs</strong></p><ul><li><code>Inputs</code> - This is an N x A matrix of previous inputs for which corresponding outputs are available. In this case N is the dimensionality of the fixed point vector that is being sought (and each column is a matrix that is input to the &quot;Function&quot;) and A is the number of previous Inputs/Outputs that are being provided to the fixed point.</li><li><code>Outputs</code> This is a matrix of &quot;Function&quot; values for each column of the &quot;Inputs&quot; matrix.</li><li><code>AgreementThreshold</code> - A parameter for determining when a column in Inputs and a column in Outputs match. They are deemed to match if the sum of the absolute values of the difference in the columns is less than AgreementThreshold.</li></ul><p><strong>Returns</strong></p><ul><li>A matrix of inputs and outputs excluding jumps.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/FixedPointAcceleration.jl/blob/f550a974c3dfb15c1901784ca58f1bf8efb737e2/src/1_MainFunctions.jl#L480-L488">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FixedPointAcceleration.execute_function_safely" href="#FixedPointAcceleration.execute_function_safely"><code>FixedPointAcceleration.execute_function_safely</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">execute_function_safely(Func::Function, x::Array{T,1}; type_check::Bool = false, quiet_errors::Bool = true) where T&lt;:Real</code></pre><p>This function creates a function that executes the function for which a fixed point is sought. It is a helper function that is not exported.</p><p><strong>Inputs</strong></p><ul><li><code>Func</code> - The function input to fixed_point</li><li><code>x</code> - The point at which to evaluate the function.</li><li><code>type_check</code> - Should the type stability of the function be checked and a error reported in an input vector of Ints turns into a vector of floats (for instance)</li></ul><p><strong>Returns</strong></p><ul><li>A <code>FunctionEvaluationResult</code></li></ul><p><strong>Examples</strong></p><pre><code class="nohighlight hljs">Func(x) = sqrt(x)
execute_function_safely(Func, [-1.0,0.0,1.0])
execute_function_safely(Func,[Missing(),0.0,1.0])
execute_function_safely(Func,[7.0,0.0,1.0])
execute_function_safely(Func,[NaN,0.0,1.0])
execute_function_safely(Func,[Inf,0.0,1.0])
execute_function_safely(Func,-1.0)
execute_function_safely(Func,Missing())
execute_function_safely(Func,1.0)
execute_function_safely(Func,NaN)
execute_function_safely(Func,Inf)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/FixedPointAcceleration.jl/blob/f550a974c3dfb15c1901784ca58f1bf8efb737e2/src/1_MainFunctions.jl#L1-L22">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../5_TerminationConditions/">« Termination Conditions</a><a class="docs-footer-nextpage" href="../99_refs/">References »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.15 on <span class="colophon-date" title="Sunday 20 March 2022 22:32">Sunday 20 March 2022</span>. Using Julia version 1.6.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
